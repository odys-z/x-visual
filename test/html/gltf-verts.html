<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>XTest-GLTF Vertices</title>
	<!-- <script type='text/javascript' src='../../node_modules/three/build/three.min.js'></script> -->
    <script type='text/javascript' src='../../dist/three.min-r120.js'></script>
	<script type='text/javascript' src='../../dist/xv-0.3.0.min.js'></script>
</head>
<body>
  <canvas id='canv'></canvas>
  <script>
	"use strict";

	function initCity(ecs, scene) {
		if (ecs) {
			var tree1_2 = ecs.createEntity({
				id: 'tree1_2points',
				Obj3: { geom: xv.XComponent.Obj3Type.USER,	// not used
						box: [],
						transform: [
							{rotate: {deg: 90, axis: [0, 0, 1]}},
							{translate: [120, 50, 0]}],
						mesh: undefined },                  // Thrender will handle this
				Visual:{vtype: xv.AssetType.point,
						paras: {nodes: ['Tree_1_2'],
								color: undefined,           // random
					 			size: 8},                   // WEBGL POINT size
						asset: 'city/scene.gltf'}
			});

			var car1_3 = ecs.createEntity({
				id: 'car1_3points',
				Obj3: { geom: xv.XComponent.Obj3Type.USER,
						box: [],
						transform: [ {translate: [180, 80, 0]} ],
						mesh: undefined },
				Visual:{vtype: xv.AssetType.point,
						paras: {nodes: ['CAR_03'],
								color: undefined,           // random
					 			size: 2},                   // WEBGL POINT size
						asset: 'city/scene.gltf'}
			});

			var city = ecs.createEntity({
				id: 'cd',
				Obj3: { geom: xv.XComponent.Obj3Type.USER,
						box: [],
						transform: [
							{scale: [200, 200, 200]},
							{translate: [0, -40, -100]}],
						mesh: undefined },
				Visual:{vtype: xv.AssetType.point,
						paras: {size: 8},
						asset: 'greate/cd01.gltf'}
			});

			var city = ecs.createEntity({
				id: 'city',
				Obj3: { geom: xv.XComponent.Obj3Type.USER,
						box: [],
						transform: [
							{scale: [0.1, 0.1, 0.1]},
							{translate: [0, 100, 0]} ],
						mesh: undefined },
				Visual:{vtype: xv.AssetType.point,
						paras: {size: 1,
								// keep original material, override meshes' attributes
								keepMaterial: {
									opacity: 0.3,
									emissiveIntensity: 0.1
								}},
						asset: 'city/scene.gltf'}
			});
		}
	}

	const xworld = new xv.XWorld(document.getElementById('canv'), window, {});
	const ecs = xworld.xecs;
	const xscene = xworld.xscene;

	initCity(ecs, xscene);

	xworld.startUpdate();

  </script>
</body>
</html>
