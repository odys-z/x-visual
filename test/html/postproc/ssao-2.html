<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>XTest - SSAO</title>
	<script type='text/javascript' src='../../../node_modules/three/build/three.min.js'></script>
	<script type='text/javascript' src='../../../dist/xv-0.3.0.min.js'></script>
</head>
<body>
  <canvas id='canv'></canvas><br>
  <input type='button' value='SSAO' onclick='xworld.xssao.togggleOutput()' />
  <script>
	"use strict";

	const xworld = new xv.XWorld(document.getElementById('canv'), window,
			  { canvasize: [480, 320],
				effects: true,
				alphaTest: '0.0',
				light:{
					intensity: 1,
					skyColor: 0xffffff,
					position: [100, 100, 100] },
				shadow: {
					helper: true,
					radius: 24,
					bias: 0.001,
					near: 60,
					far: 500,
				 	zoom: 1.}
			  } );
	const ecs = xworld.xecs;
	const xscene = xworld.xscene;

	const asset = 'data:application/x-visual+img,color-pixel [1., 1, 1, 1]';
	xworld.addEntities([
	  { id: 'ground',
		Obj3: { geom: xv.XComponent.Obj3Type.BOX,
				box: [200, 200, 5],
				transform: [
					{ rotate: { deg: -90, axis: [1, 0, 0] } },
					{ translate: [0, 0, 0] } ]
			  },
		Visual:{vtype: xv.AssetType.mesh,
				paras: { side: THREE.FrontSide },
				asset},
		Ssao: { }
	  },
	  { id: 'wall-0',
		Obj3: { geom: xv.XComponent.Obj3Type.BOX,
				box: [200, 60, 5],
				transform: [
					{ rotate: { deg: 90, axis: [0, 1, 0] } },
					{ translate: [0, 0, 0] } ]
			  },
		Visual:{vtype: xv.AssetType.mesh,
				paras: { side: THREE.FrontSide },
				asset},
		Ssao: { }
	  },
	  { id: 'wall-1',
		Obj3: { geom: xv.XComponent.Obj3Type.BOX,
				box: [200, 200, 5],
				transform: [
					// { rotate: { deg: 90, axis: [1, 0, 0] } },
					{ translate: [0, 0, 0] } ]
			  },
		Visual:{vtype: xv.AssetType.mesh,
				paras: { side: THREE.FrontSide },
				asset},
		Ssao: { }
	  },
	]);

	xworld.startUpdate();

  </script>
</body>
</html>
